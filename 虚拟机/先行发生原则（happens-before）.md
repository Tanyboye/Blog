#### 先行发生原则（happens-before）

一个操作的结果能被另一个操作看到

操作A先行发生于操作B，简单理解就是操作A比操作B先执行



#### Java中的8种happens-before原则

1. 程序次序规则：一个线程内，按照代码顺序，书写在前面的操作先行发生于书写在后面的操作；
2. 锁定规则：一个unLock操作先行发生于后面对同一个锁额lock操作；
3. volatile变量规则：对一个变量的写操作先行发生于后面对这个变量的读操作；
4. 传递规则：如果操作A先行发生于操作B，而操作B又先行发生于操作C，则可以得出操作A先行发生于操作C；
5. 线程启动规则：Thread对象的start()方法先行发生于此线程的每个一个动作；
6. 线程中断规则：对线程interrupt()方法的调用先行发生于被中断线程的代码检测到中断事件的发生；
7. 线程终结规则：线程中所有的操作都先行发生于线程的终止检测，我们可以通过Thread.join()方法结束、Thread.isAlive()的返回值手段检测到线程已经终止执行；
8. 对象终结规则：一个对象的初始化完成先行发生于他的finalize()方法的开始；



**注意**：

happens-before原则是从结果上来看的

```java
int a = 1;
int a = 2;
```

虽然a=1先行发生于a=2，但是a=2有可能被处理器先执行，这并不影响先行发生原则的正确性。



#### 参考

深入理解Java虚拟机